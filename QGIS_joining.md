# Присоединение элементов в QGIS
*Курсивом* — названия слоёв  
У меня QGIS на английском, так что в некоторых местах не уверен в переводе.

## 1. Введение 
У нас должно быть два слоя. Один — тот, к которому мы будем присоединять «*blank*». Второй — тот, который мы будем присоединять «*join*». В них обоих должны быть столбцы с уникальными характеристиками (например, OSM_ID или что-то такое).

## 2. Подготовка «*join*» 
Допустим, это у нас экселевская таблица. Если в ней есть нецелые числа, лучше их сразу подготовить, заменив запятые на точки (если это по умолчанию не выставлено в excel). После чего сохраняем как CSV файл. Обычно эксель автоматически подбирает удобный разделитель, но могут быть и проблемы. Об этом ниже.  
Сохраняем CSV куда удобно.  
> Желательно неиспользуемые столбцы, даже если они в конце, удалять полностью, а не удалять значения  

## 3. Подготовка «*blank*» 
Проверяем, чтобы столбец с уникальной характеристикой, если это число, имел числовой тип. Обычно это integer. 

![alt_text](https://github.com/a-berez/QGIS-and-other/blob/main/pics/join1.png)  

## 4. Загрузка «*join*» в QGIS  
Слой → Добавить слой → delimited text layer или ctrl/cmd+Shift+T

![alt_text](https://github.com/a-berez/QGIS-and-other/blob/main/pics/join2.png)  

[1] — выбираем файл, который надо загрузить   
[2] — выбираем разделитель. Чаще всего это точка с запятой, но могут быть исключения. При выборе нужно ориентироваться на окошко предпросмотра [5]  
[3] — Нужно отметить: первая строка как заголовок, цеплять типы полей, отбрасывать пустые поля, (если не изменены запятые на точки в п.2) запятая как десятичный разделитель   
[4] — очевидно   
[5] — окно предпросмотра   

![alt_text](https://github.com/a-berez/QGIS-and-other/blob/main/pics/join3.png)  

Проверив всё, нажимаем добавить и проверяем загрузилась ли таблица атрибутов.

## 5. Присоединение
В свойствах слоя выбираем присоединение и нажимаем на плюсик. 

![alt_text](https://github.com/a-berez/QGIS-and-other/blob/main/pics/join4.png)

[1] — выбираем слой, который хотим присоединить. В данном случае «*join*»  
[2] — выбираем «уникальный» столбец слоя «*join*»  
[3] — выбираем «уникальный» столбец слоя «*blank*». Названия столбцов не обязательно совпадают. Важно, чтобы совпадали тип данных и значения  
[4] — если необходимо, отмечаем поля, которые нужно подсоединить. Если убрать галочку, подключатся все  
[5] — если необходимо выбираем префикс названия столбцов. Если убрать галочку, он будет «названиеслоя_»  
После этого проверяем, подключились ли поля в соответствующем разделе или в атрибутивке  
После этого лучше пересохранить слой «*blank*» с добавленными полями, чтобы поля стали «родными»  


![alt_text](https://github.com/a-berez/QGIS-and-other/blob/main/pics/join5.png)


Аналогично поступаем и в случае, когда нам нужно прибавить к одному векторному слою другой.
